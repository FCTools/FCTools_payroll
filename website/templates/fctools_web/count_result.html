{% extends "base.html" %}
{% load static %}

{% block title %}Result{% endblock %}
{% block headers %}
    <style type="text/css">
        #centerLayer {
            margin-left: 10%;
            width: 80%;
            padding: 10px;
        }

        .box div {
            width: 250px;
            display: inline-block;
            border: 1px solid black
        }
    </style>
    <style>
        .text_green {
            background-color: #ffffff;
            color: #4cbb17;
        }
    </style>
    <style>
        .text_red {
            background-color: #ffffff;
            color: #ff0000;
        }
    </style>
     <style>
   table {
    width: 80%;
       height: 70%;
   }
  </style>
    <style>
    .col {
        width: 11%;
    }
    </style>
{% endblock %}

{% block body_class %}text-center{% endblock %}

{% block content %}
    <p>User: <b>{{ user }}</b></p>
    <p>Total revenue: <b>{{ total_revenue }}</b></p>
    <p>Final percent: <b>{{ final_percent }}</b></p>
    <p>Period: <b>{{ start_date }} - {{ end_date }}</b></p>

    <table id="centerLayer" border="1" cellpadding="5">

        <tr>
            <td style="padding:15px" class="col">----</td>
            {% for traffic_group in start_balances %}
                <td style="padding:15px" class="col">
                    {{ traffic_group }}
                </td>
            {% endfor %}
        </tr>

        <tr>
            <td style="padding:15px" class="col">Start balances</td>
            {% for traffic_group, balance in start_balances.items %}
                {% if balance > 0 %}
                    <td class="text_green col" style="padding:15px">{{ balance }}</td>
                {% elif balance < 0 %}
                    <td class="text_red col" style="padding:15px">{{ balance }}</td>
                {% else %}
                    <td style="padding:15px" class="col">{{ balance }}</td>
                {% endif %}
            {% endfor %}
        </tr>

        <tr>
            <td style="padding:15px" class="col">Profits</td>
            {% for traffic_group, profit in profits.items %}
                {% if profit > 0 %}
                    <td class="text_green col" style="padding:15px">{{ profit }}</td>
                {% elif profit < 0 %}
                    <td class="text_red col" style="padding:15px">{{ profit }}</td>
                {% else %}
                    <td style="padding:15px" class="col">{{ profit }}</td>
                {% endif %}
            {% endfor %}
        </tr>

        <tr>
            <td style="padding:15px" class="col">Previous period</td>
            {% for traffic_group, profit in from_prev_period.items %}
                {% if profit.1 > 0 %}
                    <td class="text_green col" style="padding:15px">{{ profit.0 }}</td>
                {% elif profit.1 < 0 %}
                    <td class="text_red col" style="padding:15px">{{ profit.0 }}</td>
                {% else %}
                    <td style="padding:15px" class="col">{{ profit.0 }}</td>
                {% endif %}
            {% endfor %}
        </tr>

        <tr>
            <td style="padding:15px" class="col">Tests</td>
            {% for traffic_group, profit in tests.items %}
                {% if profit.1 > 0 %}
                    <td class="text_green col" style="padding:15px">{{ profit.0 }}</td>
                {% elif profit.1 < 0 %}
                    <td class="text_red col" style="padding:15px">{{ profit.0 }}</td>
                {% else %}
                    <td style="padding:15px" class="col">{{ profit.0 }}</td>
                {% endif %}
            {% endfor %}
        </tr>

        {% if from_other_users %}
        <tr>
            <td style="padding:15px" class="col">From other users</td>
            {% for traffic_group, value in from_other_users.items %}
                <td style="padding:15px" class="col">
                    {% if value.1 > 0 %}
                        <p class="text_green">{{ value.0 }}</p>
                    {% else %}
                        0.0
                    {% endif %}
                </td>
            {% endfor %}
        </tr>
        {% endif %}

        <tr>
            <td style="padding:15px" class="col">Summary</td>
            {% for traffic_group, profit in result.items %}
                {% if profit.1 > 0 %}
                    <td class="text_green col" style="padding:15px">{{ profit.0 }}</td>
                {% elif profit.1 < 0 %}
                    <td class="text_red col" style="padding:15px">{{ profit.0 }}</td>
                {% else %}
                    <td style="padding:15px" class="col">{{ profit.0 }}</td>
                {% endif %}
            {% endfor %}
        </tr>

    </table>
{% endblock %}
